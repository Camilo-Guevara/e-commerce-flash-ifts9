<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>E-commerce</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='logotipo.png') }}" />
    <style>
        body { font-family: Arial, sans-serif; margin: 16px; }
        form { margin-bottom: 16px; }
        img { display: block; margin: 8px 0; }
        hr { margin: 16px 0; }
        header .container { display: flex; align-items: center; justify-content: space-between; }
        .cartas { border: 1px solid #ddd; padding: 12px; border-radius: 8px; margin-bottom: 12px; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <p class="logo">e-commerce</p>
            <nav>
                <a href="/">Inicio</a>
                <a href="/productos">Productos</a>
                <a href="/carrito">Carrito</a>
                <a href="/perfil">Perfil</a>
                <a href="/logout">Cerrar sesión</a>
            </nav>
        </div>
    </header>

    <img src="{{ url_for('static', filename='logotipo.png') }}" width="240" height="160" alt="Logotipo" />
    <h1 style="text-align:center">Bienvenido al proyecto de E‑commerce</h1>

    <form method="GET" action="/buscar">
        <input type="text" placeholder="Buscar productos..." name="q" />
        <button type="submit">Buscar</button>
    </form>

    <section id="productos">
        <h2>Catálogo de productos</h2>
        {% if productos %}
            {% for p in productos %}
            <div class="cartas">
                <h3>{{ p.nombre }}</h3>
                <img src="{{ url_for('static', filename=(p.imagenURL if p.imagenURL else ('producto ' ~ p.id ~ '.jpeg'))) }}" width="200" height="180" alt="{{ p.nombre }}" />
                <p>${{ '%.2f'|format(p.precio) }}</p>
                <form method="POST" action="/pedido/agregar">
                    <input type="hidden" name="id" value="{{ p.id }}" />
                    <label for="cantidad{{ p.id }}">Cantidad:</label>
                    <input id="cantidad{{ p.id }}" type="number" value="1" min="1" name="cantidad" />
                    <button type="submit">Añadir al pedido</button>
                </form>
            </div>
            {% endfor %}
        {% else %}
            <p>No hay productos disponibles.</p>
        {% endif %}
    </section>

</body>
</html>
